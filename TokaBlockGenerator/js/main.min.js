function B(d,a,c){d instanceof String&&(d=String(d));for(var f=d.length,k=0;k<f;k++){var p=d[k];if(a.call(c,p,k,d))return{g:k,h:p}}return{g:-1,h:void 0}}var F="function"==typeof Object.defineProperties?Object.defineProperty:function(d,a,c){if(d==Array.prototype||d==Object.prototype)return d;d[a]=c.value;return d};
function I(d){d=["object"==typeof globalThis&&globalThis,d,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var a=0;a<d.length;++a){var c=d[a];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");}var K=I(this);function L(d,a){if(a)a:{var c=K;d=d.split(".");for(var f=0;f<d.length-1;f++){var k=d[f];if(!(k in c))break a;c=c[k]}d=d[d.length-1];f=c[d];a=a(f);a!=f&&null!=a&&F(c,d,{configurable:!0,writable:!0,value:a})}}
L("Array.prototype.find",function(d){return d?d:function(a,c){return B(this,a,c).h}});function M(d){var a=0;return function(){return a<d.length?{done:!1,value:d[a++]}:{done:!0}}}L("Symbol",function(d){function a(k){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new c("jscomp_symbol_"+(k||"")+"_"+f++,k)}function c(k,p){this.i=k;F(this,"description",{configurable:!0,writable:!0,value:p})}if(d)return d;c.prototype.toString=function(){return this.i};var f=0;return a});
L("Symbol.iterator",function(d){if(d)return d;d=Symbol("Symbol.iterator");for(var a="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),c=0;c<a.length;c++){var f=K[a[c]];"function"===typeof f&&"function"!=typeof f.prototype[d]&&F(f.prototype,d,{configurable:!0,writable:!0,value:function(){return P(M(this))}})}return d});function P(d){d={next:d};d[Symbol.iterator]=function(){return this};return d}
function Q(d,a){d instanceof String&&(d+="");var c=0,f=!1,k={next:function(){if(!f&&c<d.length){var p=c++;return{value:a(p,d[p]),done:!1}}f=!0;return{done:!0,value:void 0}}};k[Symbol.iterator]=function(){return k};return k}L("Array.prototype.keys",function(d){return d?d:function(){return Q(this,function(a){return a})}});L("Object.is",function(d){return d?d:function(a,c){return a===c?0!==a||1/a===1/c:a!==a&&c!==c}});
L("Array.prototype.includes",function(d){return d?d:function(a,c){var f=this;f instanceof String&&(f=String(f));var k=f.length;c=c||0;for(0>c&&(c=Math.max(c+k,0));c<k;c++){var p=f[c];if(p===a||Object.is(p,a))return!0}return!1}});
L("String.prototype.includes",function(d){return d?d:function(a,c){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(a instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==this.indexOf(a,c||0)}});L("Array.prototype.findIndex",function(d){return d?d:function(a,c){return B(this,a,c).g}});
$(function(){function d(){switch(C){case 1:$("#help-content-1").fadeOut("fast");$("#help-content_2").slideToggle("fast");C++;break;case 2:$("#help-content_2").slideToggle("fast");$("#help-content-3").fadeIn("fast");C++;break;case 3:$("#help-content-3").fadeOut("fast");$("#page-help").hide();C=0;break;case 5:$("#help-content-1").hide();$("#help-content_2").hide();$("#help-content-3").hide();$("#page-help").hide();C=0;break;default:$("#help-content-1").fadeIn("fast"),C++}}function a(){var b=$("#input-file").prop("files")[0],
e=new FileReader;e.onload=function(){t(e.result)};try{e.readAsText(b)}catch(h){console.error("error:"+h)}}function c(){var b=new XMLHttpRequest;b.open("GET","../json/format.json");b.responseType="json";b.send();b.onload=function(){E=Object(b.response)}}function f(){for(var b=$(".components-flammable-flame-odds"),e=b.length,h=$(".components-flammable-burn-odds"),m=0;m<e;m++){var n="0"==b.eq(m).val();h.eq(m).prop("disabled",n);h.eq(m).closest(".value-element").toggleClass("disabled",n)}G&&p();k();b=
z();$("pre.language-json code.language-json").remove();$("pre.language-json").append($("<code>").addClass("language-json").text(b));$("textarea#code-buffer").val(b);Prism.highlightAll()}function k(){G=!1;"number"===typeof H&&window.clearTimeout(H);H=window.setTimeout(function(){G=!0;p()},500)}function p(){$("ul.issue-list li").remove();$(".stat-warning,.stat-error").removeClass("stat-warning stat-error");var b=0;var e=$("#description-block-name"),h=e.val().split(/:/),m="";2>h.length?m='[Description:identifier] \u30d6\u30ed\u30c3\u30afID\u304c ":" \u3067\u533a\u5207\u3089\u308c\u3066\u3044\u307e\u305b\u3093\u3002"\u540d\u524d\u7a7a\u9593:\u30d6\u30ed\u30c3\u30afID"\u306e\u5f62\u5f0f\u306b\u306a\u3063\u3066\u3044\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002':
2<h.length?m='[Description:identifier] \u4e0d\u660e\u306aID\u5f62\u5f0f\u3067\u3059\u3002"\u540d\u524d\u7a7a\u9593:\u30d6\u30ed\u30c3\u30afID"\u306e\u5f62\u5f0f\u306b\u306a\u3063\u3066\u3044\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002':""==h[1]?m='[Description:identifier] \u30d6\u30ed\u30c3\u30afID\u304c\u7a7a\u3067\u3059\u3002\u30d6\u30ed\u30c3\u30afID\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u30d6\u30ed\u30c3\u30afID\u306f"\u540d\u524d\u7a7a\u9593:\u30d6\u30ed\u30c3\u30afID"\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002':
""==h[0]&&(m='[Description:identifier] \u540d\u524d\u7a7a\u9593\u304c\u7a7a\u3067\u3059\u3002\u540d\u524d\u7a7a\u9593\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u30d6\u30ed\u30c3\u30afID\u306f"\u540d\u524d\u7a7a\u9593:\u30d6\u30ed\u30c3\u30afID"\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002');""!=m&&(h=m,m=$("<li>"),m.append($("<img>").attr({src:"img/error.svg",alt:"",width:"19px",height:"19px"}),$("<p>").text(h)),e.addClass("stat-error"),$("ul.issue-list").append(m),
b++);$("span.issue-warning-num").text("\u8b66\u544a:0");$("span.issue-error-num").text("\u30a8\u30e9\u30fc:"+b);0>=b&&$("ul.issue-list").append("<li>\u554f\u984c\u306f\u3042\u308a\u307e\u305b\u3093</li>")}function r(b,e){b=void 0===b?"":b;e=void 0===e?"":e;var h="\u6709\u52b9\u306ajson\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002";if(""==b||""==e)return h;e=e.split(" ");var m=e.findIndex(function(q){return"line"==q}),n=e.findIndex(function(q){return"position"==q});-1!=m?(e=parseInt(e[m+1],10),
n=function(q){for(var u=0,v=1;v<q;v++)u=b.indexOf("\n",u)+1;return u},m=n(e-1),n=n(e+1)-1,h+="\n"+(e-1)+"~"+e+"\u884c\u3067\u554f\u984c\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\n"+b.substring(m,n)):-1!=n&&(e=e[n+1],m=b.lastIndexOf("\n",b.lastIndexOf("\n",e)-1)+1,n=b.substr(0,m).match(/\n/g).length+1,h+="\n"+n+"~"+(n+1)+"\u884c\u3067\u554f\u984c\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\n"+b.substring(m,b.indexOf("\n",e-1)));return h}function t(b){b=void 0===b?"":b;try{var e=JSON.parse(b)}catch(h){window.alert(r(b,
h.message));console.error("error:"+h);return}g=e.format_version;if(null!=g)switch(g){case "1.16.100":case "1.16.0":case "1.12.0":break;default:b=g.split(/,/).map(function(h){return Number(h)}),1<=b[0]&&16<=b[1]&&100<=b[2]?g="1.16.100":1==b[0]&&16==b[1]&&0<=b[2]?g="1.16.0":1>=b[0]&&16>b[1]&&(g="1.12.0")}$("#format-version").val(g);b=e["minecraft:block"].description;null!=b.identifier&&$("#description-block-name").val(b.identifier);e=e["minecraft:block"].components;switch(g){case "1.16.0":b.is_experimental&&
$("#description-is-experimental").prop("checked",!0);b.register_to_creative_menu&&$("#description-register-to-creative-menu").prop("checked",!0);null!=e["minecraft:loot"]&&$("#components-loot").val(e["minecraft:loot"]);null!=e["minecraft:destroy_time"]&&$("#components-destroy-time").val(e["minecraft:destroy_time"]);null!=e["minecraft:explosion_resistance"]&&$("#components-explosion-resistance").val(e["minecraft:explosion_resistance"]);null!=e["minecraft:friction"]&&$("#components-friction").val(e["minecraft:friction"]);
null!=e["minecraft:flammable"]&&(b=e["minecraft:flammable"],$("#components-flame-odds").val(b.flame_odds),0!=b.flame_odds&&($("#components-burn-odds").val(b.burn_odds),$("#components-burn-odds").prop("disabled",!1)));null!=e["minecraft:map_color"]&&($("#components-map-color").val(e["minecraft:map_color"]),$("#components-map-color-pick").val(e["minecraft:map_color"]));null!=e["minecraft:block_light_absorption"]&&$("#components-block-light-absorption").val(e["minecraft:block-light-absorption"]);null!=
e["minecraft:block_light_emission"]&&$("#components-block-light-emission").val(e["minecraft:block_light_emission"]);break;case "1.12.0":b.is_experimental&&$("#description-is-experimental").prop("checked",!0),b.register_to_creative_menu&&$("#description-register-to-creative-menu").prop("checked",!0),null!=e["minecraft:loot"].table&&$("#components-loot").val(e["minecraft:loot"].table),null!=e["minecraft:destroy_time"].value&&$("#components-destroy-time").val(e["minecraft:destroy_time"].value),null!=
e["minecraft:explosion_resistance"].value&&$("#components-explosion-resistance").val(e["minecraft:explosion_resistance"].value),null!=e["minecraft:friction"].value&&$("#components-friction").val(e["minecraft:friction"].value),null!=e["minecraft:flammable"]&&(b=e["minecraft:flammable"],$("#components-flame-odds").val(b.flame_odds),0!=b.flame_odds&&($("#components-burn-odds").val(b.burn_odds),$("#components-burn-odds").prop("disabled",!1))),null!=e["minecraft:map_color"].color&&($("#components-map-color").val(e["minecraft:map_color"].color),
$("#components-map-color-pick").val(e["minecraft:map_color"].color)),null!=e["minecraft:block_light_absorption"].value&&$("#components-block-light-absorption").val(e["minecraft:block_light_absorption"].value),null!=e["minecraft:block_light_emission"].emission&&$("#components-block-light-emission").val(e["minecraft:block_light_emission"].emission)}f()}function z(){var b={};b.format_version=g;b["minecraft:block"]={};var e={};e.identifier=$("#description-block-name").val();switch(g){case "1.16.100":var h=
$(".blockState.status-block-content"),m=h.length;if(function(){for(var y=0;y<m;y++)if(""!=$(".blockState-name").eq(y).val())return!0;return!1}()){for(var n={},q=0;q<m;q++){var u=h.eq(q),v=u.find(".blockState-name").val();if(""!=v){var D=u.find(".blockState-type").val(),x=[];switch(D){case "val_Integer":u=u.find("."+D+">.value-element input.blockState-integer.type-array-integer");D=u.length;for(var A=0;A<D;A++)""!=u.eq(A).val()&&x.push(Number(u.eq(A).val())),console.log(x);break;case "val_String":u=
u.find("."+D+">.value-element input.blockState-string.type-array-string");D=u.length;for(A=0;A<D;A++)""!=u.eq(A).val()&&x.push(u.eq(A).val());break;default:x=u.find(".blockState-boolean").is(":checked"),x=[x,!x]}n[v]=x}}e.properties=n}break;case "1.16.0":case "1.12.0":e.is_experimental=$("#description-is-experimental").is(":checked"),e["register_to_creative-menu"]=$("#description-register-to-creative-menu").is(":checked")}b["minecraft:block"].description=e;b["minecraft:block"].components=R($("#editor-main .editor-element-body").children(),
g);switch(g){case "1.16.100":e=$(".event.status-block-content");var N=e.length;h=$("#event-name-list");h.children().remove();if(function(){for(var y=0;y<N;y++)if(""!=$(".event-name").eq(y).val())return!0;return!1}()){n={};for(q=0;q<N;q++)x=e.eq(q),v=x.find(".event-name").val(),""!=v&&(x=x.children(".editor-element").children(".editor-element-body").children(),n[v]=S(x),h.append($("<option>").attr("value",v)));b["minecraft:block"].events=n}}switch(g){case "1.16.100":var J=$(".permutations_condition"),
O=J.length;if(function(){for(var y=0;y<O;y++)if(""!=J.eq(y).val())return!0;return!1}()){e=[];h=$(".permutations.block-tab-container");for(n=0;n<O;n++)q=h.eq(n).find(".editor-element-body"),v=J.eq(n).val(),""!=v&&(v={condition:v},v.components=R(q.children(),g),e.push(v));b["minecraft:block"].permutations=e}}return JSON.stringify(b,null,"  ")}var w=!1,g="1.16.100",l=!1,H,G=!0,C=0,E={};f();$(window).bind("beforeunload",function(){if(w)return"\u3053\u306e\u30da\u30fc\u30b8\u3092\u96e2\u308c\u3088\u3046\u3068\u3057\u3066\u3044\u307e\u3059\u3002"});
$(document).on("change","input,textarea,select",function(){f();w=!0});$(document).on("keyup","input,textarea,select",function(){f();w=!0});$(".separator").on("mousedown",function(){l?l&&(l=!1):l=!0});$(document).on("mouseup",function(){l=!1;$("html").css("cursor","");var b=$(".separator");b.prev().removeClass("drag-lock");b.next().removeClass("drag-lock")});$(document).on("mousemove",function(b){if(l){$("html").css("cursor","e-resize");var e=$(".separator");e.prev().addClass("drag-lock");e.next().addClass("drag-lock");
var h=$("html").width()-2;b=h-b.clientX;h-=b;e.next().css("flex-basis",b);e.prev().css("flex-basis",h)}});$(window).resize(function(){$("div.preview").css("display","");$("div.editor").css("flex-basis","");$("div.data-check").css("flex-basis","");C=5;d()});$("#show-help").on("click",function(){$("#page-help").fadeIn("fast");d()});$("#page-help").on("click",function(){d()});$("div#show-preview").on("click",function(){var b=$("div#show-preview");$("div.preview").slideToggle();b.hasClass("active")?b.removeClass("active"):
b.addClass("active")});$("#open-about").on("click",function(){$("div.page-about").removeClass("about-hide")});$("#close-about-btn").on("click",function(){$("div.page-about").addClass("about-hide")});$("#hamburger-opener").on("click",function(){$(".switch-element-body").toggleClass("open",$("#hamburger-opener").is(":checked"))});$('input[name="editor-switch"]').on("click",function(){var b=[!0,!0,!0,!0];switch($('input[name="editor-switch"]:checked').val()){case "event":b[1]=!1;break;case "permutations":b[2]=
!1;break;case "blockState":b[3]=!1;break;default:b[0]=!1}$("#editor-main").toggleClass("hide",b[0]);$("#editor-event").toggleClass("hide",b[1]);$("#editor-permutations").toggleClass("hide",b[2]);$("#editor-blockState").toggleClass("hide",b[3])});$(document).on("click",".block-tab-children>input[type=radio]",function(b){b=$(b.target);var e=Number(b.next(".tab-number").text());b.closest(".block-tabPanel").find(".block-tab-container").removeClass("selected");b.closest(".block-tabPanel").find(".block-tab-container").eq(e).addClass("selected")});
$(document).on("click",".add-block-tab-element",function(b){b=$(b.target);var e=b.closest(".block-tabPanel"),h=e.find(".block-tab-body"),m=h.children().length,n={};h.append($("<label>").addClass(b.prop("class").replace(" add-block-tab-element","")+" block-tab-children invisible-Control").append($("<input>").attr((n.type="radio",n.name="permutations",n)).prop("checked",0==m).addClass("permutations block-tab"),$("<div>").addClass("tab-number").text(m)));e.find(".block-tab-contents").append($("#permutation-block-tab").contents().clone().toggleClass("selected",
0==m))});$(document).on("click",".remove-block-tab-element",function(b){var e=$(b.target).closest(".block-tabPanel");b=e.find(".block-tab-body > .block-tab-children");var h=b.length;if(!(0>=h)){for(var m=0,n=0;n<h;n++)if(b.eq(n).find("input[type=radio]").is(":checked")){m=n;break}e.find(".block-tab-container").eq(m).remove();b.eq(m).remove();e.find(".block-tab-container:first-child").addClass("selected");b=e.find(".block-tab-body > .block-tab-children");h=b.length;for(e=0;e<h;e++)b.eq(e).find("input[type=radio]").prop("checked",
0==e),b.eq(e).find(".tab-number").text(e)}});$(document).on("click","input.element-control-switch",function(b){b=$(b.target);var e=b.closest(".element-control").prev(".editor-element-body");b.is(":checked")?e.append($("#value-elements-component").contents().filter(".value-element."+b.attr("name")).clone()):e.contents().filter(".value-element."+b.attr("name")).remove()});$(document).on("click",".switchable-content select",function(b){b=$(b.target);for(var e=b.closest(".switchable-content").nextAll(".switchable-element"),
h=0;h<e.length;h++)e.eq(h).toggleClass("hide",!e.eq(h).hasClass(b.val()))});$(document).on("click",".tab-children>input[type=radio]",function(b){b=$(b.target);var e=Number(b.next(".tab-number").text());b.closest(".tabpanel").children(".tab-contents").children(".tab-container").removeClass("selected").eq(e).addClass("selected")});$(document).on("click",".add-tab-element",function(b){b=$(b.target).closest(".tabpanel");var e=b.children(".tab-navigation").children(".tab-body"),h=e.children(":first-child").clone();
h.find("input[type=radio]").prop("checked",!1);h.find(".tab-number").text(e.children().length);e.append(h);b=b.children(".tab-contents");b.append(b.children("div:first-child").clone().removeClass("selected"))});$(document).on("click",".remove-tab-element",function(b){var e=$(b.target),h=e.closest(".tabpanel");b=h.children(".tab-navigation").find(".tab-body > .tab-children");var m=b.length;if(!(1>=m)){for(var n=0,q=0;q<m;q++)if(b.eq(q).find("input[type=radio]").is(":checked")){n=q;break}e.closest(".tabpanel").children(".tab-contents").children(".tab-container").eq(n).remove();
b.eq(n).remove();e.closest(".tabpanel").children(".tab-contents").children(".tab-container:first-child").addClass("selected");b=h.children(".tab-navigation").find(".tab-body > .tab-children");m=b.length;for(e=0;e<m;e++)b.eq(e).find("input[type=radio]").prop("checked",0==e),b.eq(e).find(".tab-number").text(e)}});$(document).on("click","input.add-array-element",function(b){var e=$(b.target).closest(".value-input");b=e.find(".array-list");var h=b.find(".array-data:last-child>input").attr("name");if(e.hasClass("type-array-modal")){var m=
{};b.append($("<div>").addClass("array-data type-modal").append($("<label>").append($("<div>").addClass("array-num").text(b.children().length),$("<input>").attr((m.type="button",m.value="\u7de8\u96c6",m)).addClass("modal-open")),b.find(":first-child .modal").clone()))}else{m=b.append;var n=$("<label>").addClass("array-data"),q=n.append,u=$("<div>").addClass("array-num").text(b.children().length);a:{var v=$("<input>");if(e.hasClass("type-array-integer"))e={},v.attr((e.type="number",e.name=h,e)).addClass(h+
" type-array-integer");else if(e.hasClass("type-array-string"))e={},v.attr((e.type="text",e.name=h,e)).addClass(h+" type-array-string");else if(e.hasClass("type-array-select")){h=$("<select>").attr("name",h).addClass(h+" type-array-select").append($('<option value="up">\u4e0a</option>'),$('<option value="down">\u4e0b</option>'),$('<option value="north">\u5317</option>'),$('<option value="south">\u5357</option>'),$('<option value="east">\u6771</option>'),$('<option value="west">\u897f</option>'),$('<option value="side">\u5074\u9762</option>'),
$('<option value="all">\u5168\u9762</option>'));break a}h=v}m.call(b,q.call(n,u,h))}});$(document).on("click","input.remove-array-element",function(b){b=$(b.target).closest(".value-input").find(".array-list");1>=b||b.find(".array-data:last-child").remove()});$(document).on("click",".modal-open",function(b){$(b.target).closest(".type-modal").children(".modal").removeClass("hide");b.stopPropagation()});$(document).on("click",".modal",function(b){var e=$(b.target);e.children(".modal-dialog").length&&
e.closest(".type-modal").children(".modal").addClass("hide");b.stopPropagation()});$(document).on("click",".modal-close",function(b){$(b.target).closest(".type-modal").children(".modal").addClass("hide")});$("#issue-control").on("click",function(){var b=$("div.issue-status-label svg");b.hasClass("close")?b.attr("class","open"):b.attr("class","close");$("div.issue-content").slideToggle()});$("#event-add").on("click",function(){$(".event.status-block-body").append($("#event-status-block").contents().clone())});
$(document).on("click","input.event-delete",function(b){$(b.target).closest(".status-block-content").remove()});$("#blockState-add").on("click",function(){$(".blockState.status-block-body").append($("#blockState-status-block").contents().clone())});$(document).on("click","input.blockState-delete",function(b){$(b.target).closest(".status-block-content").remove()});$("#page-share").on("click",function(){var b={title:"\u3068\u304b\u3055\u3093\u306e Block Generator",text:"\u3068\u304b\u3055\u3093\u306e Block Generator -block json\u3092\u7c21\u5358\u306b\u4f5c\u6210\u30fb\u7de8\u96c6-",
url:"https://toka7290.github.io/TokaBlockGenerator/"};navigator.share&&navigator.share(b)});$("#input-file").on("change",function(){a()});$(document).on("dragenter dragover",function(b){b.stopPropagation();b.preventDefault();$(".file-drop-zone").removeClass("hide")});$(".file-drop-zone,.file-drop-zone-textarea").on("dragleave",function(b){b.stopPropagation();b.preventDefault();$(".file-drop-zone").addClass("hide")});$(document).on("drop",function(b){w=!0;$(".file-drop-zone").addClass("hide");var e=
b;b.originalEvent&&(e=b.originalEvent);e.stopPropagation();e.preventDefault();$("#input-file").prop("files",e.dataTransfer.files);a()});$("#control-copy").on("click",function(){var b=$("textarea#code-buffer");b.select();document.execCommand("copy");$("p#control-copy-text").text("Copied");b.blur();setTimeout(function(){$("p#control-copy-text").text("Copy")},1E3)});$("#control-download").on("click",function(){var b=$("textarea#code-buffer").val();$("<a></a>",{href:window.URL.createObjectURL(new Blob([b])),
download:"manifest.json",target:"_blank"})[0].click()});$("#format-version").on("change",function(){g=$("#format-version").val();Object.keys(E).length||c();for(var b in E)$("."+b).toggleClass("unsupported",!E[b].includes(g))});$(window).on("load",function(){c()});$(document).on("change",".components-map-color",function(b){$(b.target).closest(".type-color").find(".components-map-color-pick").val($(b.target).val())});$(document).on("change",".components-map-color-pick",function(b){$(b.target).closest(".type-color").find(".components-map-color").val($(b.target).val())});
$(document).on("change",".components-block-light-emission",function(b){b=$(b.target);b.next(".components-block-light-emission-eq").text("= "+("  "+Math.round(15*parseFloat(b.val()))).slice(-2))})});
function R(d,a){var c={};switch(a){case "1.16.100":a=d.filter(".components_loot");a.length&&(c["minecraft:loot"]=a.find(".components-loot").val());a=d.filter(".components_display_name");a.length&&(c["minecraft:display_name"]=a.find(".components-display-name").val());a=d.filter(".components_tag");if(a.length){a=a.find(".components-tag");for(var f=a.length,k=0;k<f;k++)c["tag:"+a.eq(k).val()]={}}a=d.filter(".components_placement_filter");if(a.length){c["minecraft:placement_filter"]={};a=a.find(".tab-container");
f=a.length;k=[];for(var p=0;p<f;p++){for(var r={},t=a.eq(p).find(".components-placement-filter-allowed_faces"),z=[],w=0;w<t.length&&8>=w;w++)z.push(t.eq(w).val());r.allowed_faces=z;t=a.eq(p).find(".components-placement-filter-block-filter");z=[];for(w=0;w<t.length;w++)z.push(t.eq(w).val());r.block_filter=z;k.push(r)}c["minecraft:placement_filter"].conditions=k}a=d.filter(".components_preventsjumping");a.length&&(c["minecraft:preventsjumping"]=a.find(".components-preventsJumping").is(":checked"));
a=d.filter(".components_unwalkable");a.length&&(c["minecraft:unwalkable"]=a.find(".components-unwalkable").is(":checked"));a=d.filter(".components_map_color");a.length&&(c["minecraft:map_color"]=a.find(".components-map-color").val());a=d.filter(".components_crafting_table");if(a.length){f={};f.grid_size=Number(a.find(".components-crafting-table-grid-size").val());k=a.find(".components-crafting-table-crafting-tags");p=k.length;r=[];for(t=0;t<p;t++)r.push(k.eq(t).val());f.crafting_tags=r;f.custom_description=
a.find(".components-crafting-table-custom-description").val();c["minecraft:crafting_table"]=f}a=d.filter(".components_geometry");if(a.length)switch(a.find(".components-geometry-switch").val()){case "val_geometry":c["minecraft:geometry"]=a.find(".components-geometry").val();break;case "val_cube":c["minecraft:unit_cube"]={}}a=d.filter(".components_material_instances");if(a.length){f={};k=a.find(".components-material-instances-face");p=k.length;for(r=0;r<p;r++)t={},t.texture=a.find(".components-material-instances-texture").eq(r).val(),
t.render_method=a.find(".components-material-instances-material").eq(r).val(),f[k.eq(r).val()]=t;c["minecraft:material_instances"]=f}a=d.filter(".components_entity_collision");if(a.length){switch(a.find(".components-entity-collision-switch").val()){case "val_simple":var g=a.find(".components-entity-collision-simple").is(":checked");break;case "val_details":g={},g.origin=[Number(a.find(".components-entity-collision-origin-x").val()),Number(a.find(".components-entity-collision-origin-y").val()),Number(a.find(".components-entity-collision-origin-z").val())],
g.size=[Number(a.find(".components-entity-collision-size-x").val()),Number(a.find(".components-entity-collision-size-y").val()),Number(a.find(".components-entity-collision-size-z").val())]}c["minecraft:entity_collision"]=g}a=d.filter(".components_pick_collision");if(a.length){switch(a.find(".components-pick-collision-switch").val()){case "val_simple":var l=a.find(".components-pick-collision-simple").is(":checked");break;case "val_details":l={},l.origin=[Number(a.find(".components-pick-collision-origin-x").val()),
Number(a.find(".components-pick-collision-origin-y").val()),Number(a.find(".components-pick-collision-origin-z").val())],l.size=[Number(a.find(".components-pick-collision-size-x").val()),Number(a.find(".components-pick-collision-size-y").val()),Number(a.find(".components-pick-collision-size-z").val())]}c["minecraft:pick_collision"]=l}a=d.filter(".components_rotation");a.length&&(c["minecraft:rotation"]=[parseInt(a.find(".components-rotation-x").val()),parseInt(a.find(".components-rotation-y").val()),
parseInt(a.find(".components-rotation-z").val())]);a=d.filter(".components_breathability");a.length&&(c["minecraft:breathability"]=a.find(".components-breathability").val());a=d.filter(".components_block_light_absorption");a.length&&(c["minecraft:block_light_absorption"]=parseInt(a.find(".components-block-light-absorption").val()));a=d.filter(".components_block_light_emission");a.length&&(c["minecraft:block_light_emission"]=Number(a.find(".components-block-light-emission").val()));a=d.filter(".components_destroy_time");
a.length&&(c["minecraft:destroy_time"]=Number(a.find(".components-destroy-time").val()));a=d.filter(".components_explosion_resistance");a.length&&(c["minecraft:explosion_resistance"]=Number(a.find(".components-explosion-resistance").val()));a=d.filter(".components_breakonpush");a.length&&(c["minecraft:breakonpush"]=a.find(".components-breakonpush").is(":checked"));a=d.filter(".components_immovable");a.length&&(c["minecraft:immovable"]=a.find(".components-immovable").is(":checked"));a=d.filter(".components_onlypistonpush");
a.length&&(c["minecraft:onlypistonpush"]=a.find(".components-onlypistonpush").is(":checked"));a=d.filter(".components_friction");a.length&&(c["minecraft:friction"]=Number(a.find(".components-friction").val()));a=d.filter(".components_flammable");a.length&&(g={},g.flame_odds=parseInt(a.find(".components-flammable-flame-odds").val()),g.burn_odds=parseInt(a.find(".components-flammable-burn-odds").val()),c["minecraft:flammable"]=g);a=d.filter(".components_event_on_fall_on");a.length&&(g={},g.event=a.find(".components-event-on-fall-on-event").val(),
l=a.find(".components-event-on-fall-on-condition").val(),""!=l&&(g.condition=l),l=a.find(".components-event-on-fall-on-target").val(),"default"!=l&&(g.target=l),c["minecraft:on_fall_on"]=g);a=d.filter(".components_event_on_interact");a.length&&(g={},g.event=a.find(".components-event-on-interact-event").val(),l=a.find(".components-event-on-interact-condition").val(),""!=l&&(g.condition=l),l=a.find(".components-event-on-interact-target").val(),"default"!=l&&(g.target=l),c["minecraft:on_interact"]=g);
a=d.filter(".components_event_on_placed");a.length&&(g={},g.event=a.find(".components-event-on-placed-event").val(),g.condition=a.find(".components-event-on-placed-condition").val(),a=a.find(".components-event-on-placed-target").val(),"default"!=a&&(g.target=a),c["minecraft:on_placed"]=g);a=d.filter(".components_event_on_player_placing");a.length&&(g={},g.event=a.find(".components-event-on-player-placing-event").val(),l=a.find(".components-event-on-player-placing-condition").val(),""!=l&&(g.condition=
l),l=a.find(".components-event-on-player-placing-target").val(),"default"!=l&&(g.target=l),c["minecraft:on_player_placing"]=g);a=d.filter(".components_event_on_step_on");a.length&&(g={},g.event=a.find(".components-event-on-step-on-event").val(),l=a.find(".components-event-on-step-on-condition").val(),""!=l&&(g.condition=l),l=a.find(".components-event-on-step-on-target").val(),"default"!=l&&(g.target=l),c["minecraft:on_step_on"]=g);a=d.filter(".components_event_on_step_off");a.length&&(g={},g.event=
a.find(".components-event-on-step-off-event").val(),l=a.find(".components-event-on-step-off-condition").val(),""!=l&&(g.condition=l),l=a.find(".components-event-on-step-off-target").val(),"default"!=l&&(g.target=l),c["minecraft:on_step_off"]=g);a=d.filter(".components_event_on_player_destroyed");a.length&&(g={},g.event=a.find(".components-event-on-player-destroyed-event").val(),l=a.find(".components-event-on-player-destroyed-condition").val(),""!=l&&(g.condition=l),l=a.find(".components-event-on-player-destroyed-target").val(),
"default"!=l&&(g.target=l),c["minecraft:on_player_destroyed"]=g);a=d.filter(".components_event_ticking");a.length&&(c["minecraft:ticking"]={},g={},g.event=a.find(".components-event-ticking-event").val(),l=a.find(".components-event-ticking-condition").val(),""!=l&&(g.condition=l),l=a.find(".components-event-ticking-target").val(),"default"!=l&&(g.target=l),c["minecraft:ticking"].on_tick=g,c["minecraft:ticking"].range=[Number(a.find(".components-event-ticking-range-x").val()),Number(a.find(".components-event-ticking-range-z").val())],
c["minecraft:ticking"].looping=a.find(".components-event-ticking-looping").is(":checked"));a=d.filter(".components_event_random_ticking");a.length&&(c["minecraft:random_ticking"]={},d={},d.event=a.find(".components-event-random-ticking-event").val(),g=a.find(".components-event-random-ticking-condition").val(),""!=g&&(d.condition=g),g=a.find(".components-event-random-ticking-target").val(),"default"!=g&&(d.target=g),c["minecraft:random_ticking"].on_tick=d);break;case "1.16.0":a=d.filter(".components_loot");
a.length&&(c["minecraft:loot"]=a.find(".components-loot").val());a=d.filter(".components_destroy_time");a.length&&(c["minecraft:destroy_time"]=Number(a.find(".components-destroy-time").val()));a=d.filter(".components_explosion_resistance");a.length&&(c["minecraft:explosion_resistance"]=Number(a.find(".components-explosion-resistance").val()));a=d.filter(".components_friction");a.length&&(c["minecraft:friction"]=Number(a.find(".components-friction").val()));a=d.filter(".components_flammable");a.length&&
(g={},g.flame_odds=parseInt(a.find(".components-flammable-flame-odds").val()),g.burn_odds=parseInt(a.find(".components-flammable-burn-odds").val()),c["minecraft:flammable"]=g);a=d.filter(".components_map_color");a.length&&(c["minecraft:map_color"]=a.find(".components-map-color").val());a=d.filter(".components_block_light_absorption");a.length&&(c["minecraft:block_light_absorption"]=parseInt(a.find(".components-block-light-absorption").val()));a=d.filter(".components_block_light_emission");a.length&&
(c["minecraft:block_light_emission"]=Number(a.find(".components-block-light-emission").val()));break;case "1.12.0":a=d.filter(".components_loot"),a.length&&(c["minecraft:loot"]={},c["minecraft:loot"].table=a.find(".components-loot").val()),a=d.filter(".components_destroy_time"),a.length&&(c["minecraft:destroy_time"]={},c["minecraft:destroy_time"].value=Number(a.find(".components-destroy-time").val())),a=d.filter(".components_explosion_resistance"),a.length&&(c["minecraft:explosion_resistance"]={},
c["minecraft:explosion_resistance"].value=Number(a.find(".components-explosion-resistance").val())),a=d.filter(".components_friction"),a.length&&(c["minecraft:friction"]={},c["minecraft:friction"].value=Number(a.find(".components-friction").val())),a=d.filter(".components_flammable"),a.length&&(c["minecraft:flammable"]={},c["minecraft:flammable"].flame_odds=parseInt(a.find(".components-flammable-flame-odds").val()),c["minecraft:flammable"].burn_odds=parseInt(a.find(".components-flammable-burn-odds").val())),
a=d.filter(".components_map_color"),a.length&&(c["minecraft:map_color"]={},c["minecraft:map_color"].color=a.find(".components-map-color").val()),a=d.filter(".components_block_light_absorption"),a.length&&(c["minecraft:block_light_absorption"]={},c["minecraft:block_light_absorption"].value=parseInt(a.find(".components-block-light-absorption").val())),a=d.filter(".components_block_light_emission"),a.length&&(c["minecraft:block_light_emission"]={},c["minecraft:block_light_emission"].emission=Number(a.find(".components-block-light-emission").val()))}return c}
function S(d){var a={},c=d.filter(".event_responses_set_block_property");c.length&&(a.set_block_property={});c=d.filter(".event_responses_set_block_at_pos");if(c.length){var f="set_block",k={};"val_position"==c.find(".event-responses-set-block-switch").val()&&(f="set_block_at_pos",k.block_offset=[Number(c.find(".event-responses-set-block-position-x").val()),Number(c.find(".event-responses-set-block-position-y").val()),Number(c.find(".event-responses-set-block-position-z").val())]);try{k.block_type=
JSON.parse("{"+c.find(".event-responses-set-block-id").val()+"}")}catch(w){k.block_type=c.find(".event-responses-set-block-id").val()}a[f]=k}c=d.filter(".event_responses_spawn_loot");c.length&&(a.spawn_loot.table=c.find(".event-responses-spawn-loot").val());c=d.filter(".event_responses_add_mob_effect");c.length&&(f={},f.effect=c.find(".event-responses-add-mob-effect-id").val(),f.amplifier=Number(c.find(".event-responses-add-mob-effect-amplifier").val()),f.duration=Number(c.find(".event-responses-add-mob-effect-duration").val()),
"default"!=c.find(".event-responses-add-mob-effect-target").val()&&(f.target=c.find(".event-responses-add-mob-effect-target").val()),a.add_mob_effect=f);c=d.filter(".event_responses_remove_mob_effect");c.length&&(f={},f.effect=c.find(".event-responses-remove-mob-effect-id").val(),"default"!=c.find(".event-responses-remove-mob-effect-target").val()&&(f.target=c.find(".event-responses-remove-mob-effect-target").val()),a.remove_mob_effect=f);c=d.filter(".event_responses_damage");c.length&&(f={},f.type=
c.find(".event-responses-damage-type").val(),f.amount=c.find(".event-responses-damage-amount").val(),"default"!=c.find(".event-responses-damage-target").val()&&(f.target=c.find(".event-responses-damage-target").val()),a.damage=f);c=d.filter(".event_responses_decrement_stack");c.length&&(f={},f.ignore_game_mode=c.find(".event-responses-decrement-stack-ignore-game-mode").is(":checked"),a.decrement_stack=f);c=d.filter(".event_responses_die");c.length&&(f={},"default"!=c.find(".event-responses-die-target").val()&&
(f.target=c.find(".event-responses-die-target").val()),a.die=f);c=d.filter(".event_responses_play_effect");c.length&&(f={},f.effect=c.find(".event-responses-play-effect-id").val(),f.data=c.find(".event-responses-play-effect-data").val(),"default"!=c.find(".event-responses-play-effect-target").val()&&(f.target=c.find(".event-responses-play-effect-target").val()),a.play_effect=f);c=d.filter(".event_responses_play_sound");c.length&&(f={},f.sound=c.find(".event-responses-play-sound-id").val(),"default"!=
c.find(".event-responses-play-sound-target").val()&&(f.target=c.find(".event-responses-play-sound-target").val()),a.play_sound=f);c=d.filter(".event_responses_teleport");c.length&&(f={},f.destination=[Number(c.find(".event-responses-teleport-destination-x").val()),Number(c.find(".event-responses-teleport-destination-y").val()),Number(c.find(".event-responses-teleport-destination-z").val())],f.max_range=[Number(c.find(".event-responses-teleport-max-range-x").val()),Number(c.find(".event-responses-teleport-max-range-y").val()),
Number(c.find(".event-responses-teleport-max-range-z").val())],f.avoid_water=c.find(".event-responses-teleport-avoid_water").is(":checked"),f.land_on_block=c.find(".event-responses-teleport-land-on-block").is(":checked"),"default"!=c.find(".event-responses-teleport").val()&&(f.target=c.find(".event-responses-teleport").val()),a.teleport=f);c=d.filter(".event_responses_transform_item");c.length&&(a.transform_item.transform=c.find(".event-responses-transform-item-id").val());c=d.filter(".event_responses_trigger");
c.length&&(f={},f.event=c.find(".event-responses-trigger-event").val(),k=c.find(".event-responses-trigger-condition").val(),""!=k&&(f.condition=k),k=c.find(".event-responses-trigger-target").val(),"default"!=k&&(f.target=k),a.trigger=f);c=d.filter(".event_responses_run_command");if(c.length){f={};k=c.find(".event-responses-run-command");for(var p=k.length,r=[],t=0;t<p;t++){var z=k.eq(t).val();""!=z&&r.push(z)}f.command=r;"default"!=c.find(".event-responses-run-command-target").val()&&(f.target=c.find(".event-responses-run-command-target").val());
a.run_command=f}c=d.filter(".event_responses_swing");c.length&&(a.swing={});c=d.filter(".event_responses_sequence");if(c.length){c=c.closestOpposite(".tab-contents").children(".tab-container");f=c.length;k=[];for(p=0;p<f;p++)k.push(S(c.eq(p).children(".editor-element-body").children()));a.sequence=k}c=d.filter(".event_responses_randomize");if(c.length){d=c.closestOpposite(".tab-contents").children(".tab-container");f=d.length;k=[];for(p=0;p<f;p++)r=S(d.eq(p).children(".editor-element-body").children()),
r.weight=Number(c.find(".event-responses-randomize-weight").val()),k.push(r);a.randomize=k}return a}$.fn.closestOpposite=function(d){var a=this.children();return 0===a.length?$():this.filter(d).length?this.filter(d):a.closestOpposite(d)};
